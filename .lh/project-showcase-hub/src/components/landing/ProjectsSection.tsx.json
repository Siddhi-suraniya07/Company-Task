{
    "sourceFile": "project-showcase-hub/src/components/landing/ProjectsSection.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1766168671172,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766171764389,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,6 @@\n-import { useState } from 'react';\r\n+import { useEffect, useState } from 'react';\r\n+import { getProjects } from '@/lib/api';\r\n \r\n // Default project images\r\n import projectConsultation from '@/assets/project-consultation.jpg';\r\n import projectDesign from '@/assets/project-design.jpg';\r\n@@ -22,10 +23,33 @@\n   { _id: '5', name: 'Consultation', description: 'Project Name | Location', image: projectHandover },\r\n ];\r\n \r\n const ProjectsSection = () => {\r\n-  const [projects] = useState<Project[]>(defaultProjects);\r\n+  const [projects, setProjects] = useState<Project[]>(defaultProjects);\r\n+  const [loading, setLoading] = useState<boolean>(true);\r\n+  const [error, setError] = useState<string | null>(null);\r\n \r\n+  useEffect(() => {\r\n+    let mounted = true;\r\n+    const fetchProjects = async () => {\r\n+      setLoading(true);\r\n+      setError(null);\r\n+      try {\r\n+        const res = await getProjects();\r\n+        const apiProjects: Project[] = res.data || [];\r\n+        if (mounted) setProjects([...defaultProjects, ...apiProjects]);\r\n+      } catch (err) {\r\n+        console.log('Failed to load projects from API, using default projects', err);\r\n+        if (mounted) setError('Failed to load projects');\r\n+      } finally {\r\n+        if (mounted) setLoading(false);\r\n+      }\r\n+    };\r\n+\r\n+    fetchProjects();\r\n+    return () => { mounted = false; };\r\n+  }, []);\r\n+\r\n   const getProjectImage = (project: Project, index: number) => {\r\n     if (project.image && project.image.startsWith('http')) {\r\n       return project.image;\r\n     }\r\n@@ -48,9 +72,9 @@\n           </p>\r\n         </div>\r\n \r\n         <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 md:gap-6\">\r\n-          {projects.slice(0, 5).map((project, index) => (\r\n+          {projects.map((project, index) => (\r\n             <div \r\n               key={project._id}\r\n               className=\"group animate-fade-in\"\r\n               style={{ animationDelay: `${index * 0.1}s` }}\r\n"
                }
            ],
            "date": 1766168671172,
            "name": "Commit-0",
            "content": "import { useState } from 'react';\r\n\r\n// Default project images\r\nimport projectConsultation from '@/assets/project-consultation.jpg';\r\nimport projectDesign from '@/assets/project-design.jpg';\r\nimport projectMarketing from '@/assets/project-marketing.jpg';\r\nimport projectSold from '@/assets/project-sold.jpg';\r\nimport projectHandover from '@/assets/project-handover.jpg';\r\n\r\ninterface Project {\r\n  _id: string;\r\n  name: string;\r\n  description: string;\r\n  image?: string;\r\n}\r\n\r\nconst defaultProjects = [\r\n  { _id: '1', name: 'Consultation', description: 'Project Name | Location', image: projectConsultation },\r\n  { _id: '2', name: 'Design', description: 'Project Name | Location', image: projectDesign },\r\n  { _id: '3', name: 'Marketing & Design', description: 'Project Name | Location', image: projectMarketing },\r\n  { _id: '4', name: 'Consultation & Marketing', description: 'Project Name | Location', image: projectSold },\r\n  { _id: '5', name: 'Consultation', description: 'Project Name | Location', image: projectHandover },\r\n];\r\n\r\nconst ProjectsSection = () => {\r\n  const [projects] = useState<Project[]>(defaultProjects);\r\n\r\n  const getProjectImage = (project: Project, index: number) => {\r\n    if (project.image && project.image.startsWith('http')) {\r\n      return project.image;\r\n    }\r\n    const defaultImages = [projectConsultation, projectDesign, projectMarketing, projectSold, projectHandover];\r\n    return project.image || defaultImages[index % defaultImages.length];\r\n  };\r\n\r\n  return (\r\n    <section id=\"projects\" className=\"py-20 bg-background relative\">\r\n      {/* Decorative line */}\r\n      <div className=\"absolute left-1/2 bottom-0 w-0.5 h-20 bg-gradient-to-b from-primary/50 to-transparent\" />\r\n      <div className=\"absolute left-1/2 bottom-16 w-4 h-4 rounded-full bg-accent\" />\r\n\r\n      <div className=\"container mx-auto px-4\">\r\n        <div className=\"text-center mb-16\">\r\n          <h2 className=\"section-title\">Our Projects</h2>\r\n          <p className=\"section-subtitle\">\r\n            We know what buyers are looking for and suggest projects that will bring \r\n            clients top dollar for the sale of their homes.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 md:gap-6\">\r\n          {projects.slice(0, 5).map((project, index) => (\r\n            <div \r\n              key={project._id}\r\n              className=\"group animate-fade-in\"\r\n              style={{ animationDelay: `${index * 0.1}s` }}\r\n            >\r\n              <div className=\"relative overflow-hidden rounded-lg mb-4\">\r\n                <img \r\n                  src={getProjectImage(project, index)}\r\n                  alt={project.name}\r\n                  className=\"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-110\"\r\n                />\r\n              </div>\r\n              <h3 className=\"text-primary font-semibold text-sm md:text-base mb-1\">\r\n                {project.name}\r\n              </h3>\r\n              <p className=\"text-muted-foreground text-xs md:text-sm mb-3\">\r\n                {project.description}\r\n              </p>\r\n              <button className=\"bg-accent text-accent-foreground px-4 py-2 rounded text-xs font-medium hover:bg-accent/90 transition-colors\">\r\n                READ MORE\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default ProjectsSection;\r\n"
        }
    ]
}